<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WVPlots examples • WVPlots</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="WVPlots examples">
<meta property="og:description" content="WVPlots">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">WVPlots</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/WVPlots_concept.html">WVPlots concept</a>
    </li>
    <li>
      <a href="../articles/WVPlots_examples.html">WVPlots examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://win-vector.com/" class="external-link">Sponsor: Win-Vector LLC</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>WVPlots examples</h1>
                        <h4 data-toc-skip class="author">Win-Vector
LLC</h4>
            
            <h4 data-toc-skip class="date">2023-08-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/WinVector/WVPlots/blob/HEAD/vignettes/WVPlots_examples.Rmd" class="external-link"><code>vignettes/WVPlots_examples.Rmd</code></a></small>
      <div class="hidden name"><code>WVPlots_examples.Rmd</code></div>

    </div>

    
    
<p>Some example data science plots in R using <code>ggplot2</code>. See
<a href="https://github.com/WinVector/WVPlots" class="external-link">https://github.com/WinVector/WVPlots</a>
for code/details.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">34903490</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">=</span> <span class="fl">0.5</span><span class="op">*</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">2</span><span class="op">*</span><span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">frm</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">x</span>,</span>
<span>  y <span class="op">=</span> <span class="va">y</span>,</span>
<span>  yC <span class="op">=</span> <span class="va">y</span><span class="op">&gt;=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">y</span>,probs<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">frm</span><span class="op">$</span><span class="va">absY</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">frm</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span>
<span><span class="va">frm</span><span class="op">$</span><span class="va">posY</span> <span class="op">=</span> <span class="va">frm</span><span class="op">$</span><span class="va">y</span> <span class="op">&gt;</span> <span class="fl">0</span></span></code></pre></div>
<div class="section level2">
<h2 id="scatterplots">Scatterplots<a class="anchor" aria-label="anchor" href="#scatterplots"></a>
</h2>
<p>Scatterplot with smoothing line through points.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ScatterHist.html">ScatterHist</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, title<span class="op">=</span><span class="st">"Example Fit"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please use `after_stat(density)` instead.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">WVPlots</span> package.</span></span>
<span><span class="co">##   Please report the issue at <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/WinVector/WVPlots/issues&gt;</span>.</span></span>
<span><span class="co">## <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<p>Scatterplot with best linear fit through points. Also report the
R-squared and significance of the linear fit.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ScatterHist.html">ScatterHist</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, smoothmethod<span class="op">=</span><span class="st">"lm"</span>, </span>
<span>                     title<span class="op">=</span><span class="st">"Example Linear Fit"</span>, estimate_sig <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<p>Scatterplot compared to the line <code>x = y</code>. Also report the
coefficient of determination between <code>x</code> and <code>y</code>
(where <code>y</code> is “true outcome” and <code>x</code> is “predicted
outcome”).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ScatterHist.html">ScatterHist</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, smoothmethod<span class="op">=</span><span class="st">"identity"</span>, </span>
<span>                     title<span class="op">=</span><span class="st">"Example Relation Plot"</span>, estimate_sig <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-5-1.png" width="576"></p>
<p>Scatterplot of <em>(x, y)</em> color-coded by category/group, with
marginal distributions of <em>x</em> and <em>y</em> conditioned on
group.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">34903490</span><span class="op">)</span></span>
<span><span class="va">fmScatterHistC</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>,</span>
<span>  y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">fmScatterHistC</span><span class="op">$</span><span class="va">cat</span> <span class="op">&lt;-</span> <span class="va">fmScatterHistC</span><span class="op">$</span><span class="va">x</span><span class="op">+</span><span class="va">fmScatterHistC</span><span class="op">$</span><span class="va">y</span><span class="op">&gt;</span><span class="fl">0</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ScatterHistC.html">ScatterHistC</a></span><span class="op">(</span><span class="va">fmScatterHistC</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"cat"</span>, title<span class="op">=</span><span class="st">"Example Conditional Distribution"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
<p>Scatterplot of <em>(x, y)</em> color-coded by discretized <em>z</em>.
The continuous variable <em>z</em> is binned into three groups, and then
plotted as by <code>ScatterHistC</code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">34903490</span><span class="op">)</span></span>
<span><span class="va">frmScatterHistN</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>,</span>
<span>  y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">frmScatterHistN</span><span class="op">$</span><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">frmScatterHistN</span><span class="op">$</span><span class="va">x</span><span class="op">+</span><span class="va">frmScatterHistN</span><span class="op">$</span><span class="va">y</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ScatterHistN.html">ScatterHistN</a></span><span class="op">(</span><span class="va">frmScatterHistN</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>, title<span class="op">=</span><span class="st">"Example Joint Distribution"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-7-1.png" width="576"></p>
<p>Plot the relationship <em>y</em> as a function of <em>x</em> with a
smoothing curve that estimates <span class="math inline">\(E[y |
x]\)</span>. If <em>y</em> is a 0/1 variable as below (binary
classification, where 1 is the target class), then the smoothing curve
estimates <span class="math inline">\(P(y | x)\)</span>. Since <span class="math inline">\(y \in \{0,1\}\)</span> with <span class="math inline">\(y\)</span> intended to be monotone in <span class="math inline">\(x\)</span> is the most common use of this graph,
<code>BinaryYScatterPlot</code> uses a <code>glm</code> smoother by
default (<code>use_glm=TRUE</code>, this is essentially Platt scaling),
as the best estimate of <span class="math inline">\(P(y |
x)\)</span>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/BinaryYScatterPlot.html">BinaryYScatterPlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"x"</span>, <span class="st">"posY"</span>, use_glm<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>                            title<span class="op">=</span><span class="st">"Example 'Probability of Y' Plot (ggplot2 smoothing)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-8-1.png" width="576"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/BinaryYScatterPlot.html">BinaryYScatterPlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"x"</span>, <span class="st">"posY"</span>, use_glm<span class="op">=</span><span class="cn">TRUE</span>, </span>
<span>                            title<span class="op">=</span><span class="st">"Example 'Probability of Y' Plot (GLM smoothing)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-8-2.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="hexbin-plot">Hexbin Plot<a class="anchor" aria-label="anchor" href="#hexbin-plot"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"hexbin"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">5353636</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span>, mean <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, </span>
<span>                        y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span>, mean <span class="op">=</span> <span class="fl">1</span>, sd <span class="op">=</span> <span class="fl">0.5</span> <span class="op">)</span>,</span>
<span>                        stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span>, mean <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>, </span>
<span>                        y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span>, mean <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, sd <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>                        stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>             stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/HexBinPlot.html">HexBinPlot</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"Two gaussians"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="gain-curves">Gain Curves<a class="anchor" aria-label="anchor" href="#gain-curves"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">34903490</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.1</span></span>
<span><span class="va">x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">y</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">frm</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  model<span class="op">=</span><span class="va">x</span>, </span>
<span>  value<span class="op">=</span><span class="va">y</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">frm</span><span class="op">$</span><span class="va">costs</span><span class="op">=</span><span class="fl">1</span></span>
<span><span class="va">frm</span><span class="op">$</span><span class="va">costs</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">=</span><span class="fl">5</span></span>
<span><span class="va">frm</span><span class="op">$</span><span class="va">rate</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">frm</span>, <span class="va">value</span><span class="op">/</span><span class="va">costs</span><span class="op">)</span></span>
<span></span>
<span><span class="va">frm</span><span class="op">$</span><span class="va">isValuable</span> <span class="op">=</span> <span class="op">(</span><span class="va">frm</span><span class="op">$</span><span class="va">value</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">frm</span><span class="op">$</span><span class="va">value</span>, probs<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Basic curve: each item “costs” the same. The wizard sorts by true
value, the x axis sorts by the model, and plots the fraction of the
total population.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/GainCurvePlot.html">GainCurvePlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"value"</span>, title<span class="op">=</span><span class="st">"Example Continuous Gain Curve"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
<p>We can annotate a point of the model at a specific x value</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gainx</span> <span class="op">=</span> <span class="fl">0.10</span>  <span class="co"># get the top 10% most valuable points as sorted by the model</span></span>
<span></span>
<span><span class="co"># make a function to calculate the label for the annotated point</span></span>
<span><span class="va">labelfun</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">gx</span>, <span class="va">gy</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">pctx</span> <span class="op">=</span> <span class="va">gx</span><span class="op">*</span><span class="fl">100</span></span>
<span>  <span class="va">pcty</span> <span class="op">=</span> <span class="va">gy</span><span class="op">*</span><span class="fl">100</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"The top "</span>, <span class="va">pctx</span>, <span class="st">"% most valuable points by the model\n"</span>,</span>
<span>        <span class="st">"are "</span>, <span class="va">pcty</span>, <span class="st">"% of total actual value"</span>, sep<span class="op">=</span><span class="st">''</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/GainCurvePlotWithNotation.html">GainCurvePlotWithNotation</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"value"</span>, </span>
<span>                                   title<span class="op">=</span><span class="st">"Example Gain Curve with annotation"</span>, </span>
<span>                          gainx<span class="op">=</span><span class="va">gainx</span>,labelfun<span class="op">=</span><span class="va">labelfun</span><span class="op">)</span> </span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
<p>When the <code>x</code> values have different costs, take that into
account in the gain curve. The wizard now sorts by value/cost, and the x
axis is sorted by the model, but plots the fraction of total cost,
rather than total count.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/GainCurvePlotC.html">GainCurvePlotC</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"costs"</span>, <span class="st">"value"</span>, title<span class="op">=</span><span class="st">"Example Continuous Gain CurveC"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-13-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="roc-plots">ROC Plots<a class="anchor" aria-label="anchor" href="#roc-plots"></a>
</h2>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">34903490</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># data with two different regimes of behavior</span></span>
<span><span class="va">frm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span>,</span>
<span>    isValuable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.02</span>, <span class="fl">0.98</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">200</span><span class="op">)</span> <span class="op">+</span> <span class="fl">5</span>,</span>
<span>    isValuable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ROCPlot.html">ROCPlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"isValuable"</span>, <span class="cn">TRUE</span>, title<span class="op">=</span><span class="st">"Example ROC plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-14-1.png" width="576"></p>
<p>Plotting the ROC of two models on the same data, where predictions
and true outcome all in the same data frame.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">34903490</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">x2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">*</span><span class="va">x2</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span><span class="va">x2</span> <span class="op">+</span> <span class="va">x1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">frmP</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x1<span class="op">=</span><span class="va">x1</span>,</span>
<span>  x2<span class="op">=</span><span class="va">x2</span>,</span>
<span>  yC <span class="op">=</span> <span class="va">y</span><span class="op">&gt;=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">y</span>,probs<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># WVPlots::ROCPlot(frmP, "x1", "yC", TRUE, title="Example ROC plot")</span></span>
<span><span class="co"># WVPlots::ROCPlot(frmP, "x2", "yC", TRUE, title="Example ROC plot")</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ROCPlotPair.html">ROCPlotPair</a></span><span class="op">(</span><span class="va">frmP</span>, <span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"yC"</span>, <span class="cn">TRUE</span>, title<span class="op">=</span><span class="st">"Example ROC pair plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-15-1.png" width="576"></p>
<p>Plotting the results from two data sets, for example the results of a
model on training and test sets, where predictions/outcome for the two
data sets are in different data frames.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2342458</span><span class="op">)</span></span>
<span></span>
<span><span class="va">make_data</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">nrows</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">nrows</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">d</span><span class="op">[</span><span class="st">'y'</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">d</span><span class="op">[</span><span class="st">'x'</span><span class="op">]</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.25</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">nrows</span><span class="op">)</span></span>
<span>    <span class="va">d</span><span class="op">[</span><span class="st">'x2'</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">nrows</span><span class="op">)</span></span>
<span>    <span class="va">d</span><span class="op">[</span><span class="st">'yc'</span><span class="op">]</span> <span class="op">=</span> <span class="va">d</span><span class="op">[[</span><span class="st">'y'</span><span class="op">]</span><span class="op">]</span><span class="op">&gt;</span><span class="fl">0.5</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="va">training</span> <span class="op">&lt;-</span> <span class="fu">make_data</span><span class="op">(</span><span class="fl">500</span><span class="op">)</span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu">make_data</span><span class="op">(</span><span class="fl">200</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">yc</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">x2</span>, data<span class="op">=</span><span class="va">training</span>, family<span class="op">=</span><span class="va">binomial</span><span class="op">)</span></span>
<span></span>
<span><span class="va">training</span><span class="op">$</span><span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">model</span>, newdata<span class="op">=</span><span class="va">training</span>, type<span class="op">=</span><span class="st">"response"</span><span class="op">)</span></span>
<span><span class="va">test</span><span class="op">$</span><span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">model</span>, newdata<span class="op">=</span><span class="va">test</span>, type<span class="op">=</span><span class="st">"response"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ROCPlotPair2.html">ROCPlotPair2</a></span><span class="op">(</span>nm1 <span class="op">=</span> <span class="st">"Training"</span>, <span class="co"># model 1</span></span>
<span>                      frame1 <span class="op">=</span> <span class="va">training</span>,</span>
<span>                      xvar1 <span class="op">=</span> <span class="st">"pred"</span>,  truthVar1 <span class="op">=</span> <span class="st">"yc"</span>, truthTarget1 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      nm2 <span class="op">=</span><span class="st">"Test"</span>, <span class="co"># model 2</span></span>
<span>                      frame2 <span class="op">=</span> <span class="va">test</span>,</span>
<span>                      xvar2 <span class="op">=</span> <span class="st">"pred"</span>, truthVar2 <span class="op">=</span> <span class="st">"yc"</span>, truthTarget2 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      title <span class="op">=</span> <span class="st">"Model performance, training vs test"</span>,</span>
<span>                      estimate_sig <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-16-1.png" width="576"></p>
<p>Many <code>ROC</code> plots on the same graph.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">34903490</span><span class="op">)</span></span>
<span><span class="va">x1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">x2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x3</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">*</span><span class="va">x2</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span><span class="va">x2</span> <span class="op">+</span> <span class="va">x1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">frm_m</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>   x1 <span class="op">=</span> <span class="va">x1</span>,</span>
<span>   x2 <span class="op">=</span> <span class="va">x2</span>,</span>
<span>   x3 <span class="op">=</span> <span class="va">x3</span>,</span>
<span>   yC <span class="op">=</span> <span class="va">y</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">y</span>,probs<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ROCPlotList.html">ROCPlotPairList</a></span><span class="op">(</span></span>
<span>   frame <span class="op">=</span> <span class="va">frm_m</span>,</span>
<span>   xvar_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span><span class="op">)</span>,</span>
<span>   truthVar <span class="op">=</span> <span class="st">"yC"</span>, truthTarget <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>   title <span class="op">=</span> <span class="st">"Example ROC list plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-17-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="precision-recall-threshold-plot">Precision-Recall-Threshold Plot<a class="anchor" aria-label="anchor" href="#precision-recall-threshold-plot"></a>
</h2>
<p>Plots precision and recall as functions of different classifier
thresholds.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/PRTPlot.html">PRTPlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"isValuable"</span>, <span class="cn">TRUE</span>, title<span class="op">=</span><span class="st">"Example Precision-Recall plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-18-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="threshold-plot">Threshold Plot<a class="anchor" aria-label="anchor" href="#threshold-plot"></a>
</h2>
<p><code><a href="../reference/ThresholdPlot.html">ThresholdPlot()</a></code> plots a variety of functions of
different classifier thresholds.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># replicate PRTPlot. Looks a little different because ThresholdPlot does different smoothing</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ThresholdPlot.html">ThresholdPlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"isValuable"</span>, title<span class="op">=</span><span class="st">"Reproduce PRTPlot"</span>,</span>
<span>              truth_target<span class="op">=</span><span class="cn">TRUE</span>, <span class="co"># default</span></span>
<span>              metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"precision"</span>, <span class="st">"recall"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: Removed 1 row containing missing values (`geom_line()`).</span></span></code></pre>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-19-1.png" width="576"></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># default: sensitivity/specificity</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ThresholdPlot.html">ThresholdPlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"isValuable"</span>, </span>
<span>                       title<span class="op">=</span><span class="st">"Sensitivity and Specificity as a Function of Threshold"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-19-2.png" width="576"></p>
<p>One useful application of <code>ThresholdPlot</code> is to “unroll”
an ROC plot: if the ROC shows that your model can meet an acceptable
trade-off of true positive rate and false positive rate, then
<code>ThresholdPlot</code> can tell you which threshold achieves that
goal.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ThresholdPlot.html">ThresholdPlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"isValuable"</span>, title<span class="op">=</span><span class="st">"ROC 'unrolled'"</span>,</span>
<span>              metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"true_positive_rate"</span>, <span class="st">"false_positive_rate"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-20-1.png" width="576"></p>
<p>An extended example can be found <a href="https://github.com/WinVector/WVPlots/blob/main/Examples/PickingThresholds/PickingThresholds.md" class="external-link">here</a>.</p>
</div>
<div class="section level2">
<h2 id="double-density-plot">Double Density Plot<a class="anchor" aria-label="anchor" href="#double-density-plot"></a>
</h2>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/DoubleDensityPlot.html">DoubleDensityPlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"isValuable"</span>, title<span class="op">=</span><span class="st">"Example double density plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-21-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="double-histogram-plot">Double Histogram Plot<a class="anchor" aria-label="anchor" href="#double-histogram-plot"></a>
</h2>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/DoubleHistogramPlot.html">DoubleHistogramPlot</a></span><span class="op">(</span><span class="va">frm</span>, <span class="st">"model"</span>, <span class="st">"isValuable"</span>, title<span class="op">=</span><span class="st">"Example double histogram plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-22-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="cleveland-style-dotplots">Cleveland Style Dotplots<a class="anchor" aria-label="anchor" href="#cleveland-style-dotplots"></a>
</h2>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">34903490</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># discrete variable: letters of the alphabet</span></span>
<span><span class="co"># frequencies of letters in English</span></span>
<span><span class="co"># source: http://en.algoritmy.net/article/40379/Letter-frequency-English</span></span>
<span><span class="va">letterFreqs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8.167</span>, <span class="fl">1.492</span>, <span class="fl">2.782</span>, <span class="fl">4.253</span>, <span class="fl">12.702</span>, <span class="fl">2.228</span>,</span>
<span>                <span class="fl">2.015</span>, <span class="fl">6.094</span>, <span class="fl">6.966</span>, <span class="fl">0.153</span>, <span class="fl">0.772</span>, <span class="fl">4.025</span>, <span class="fl">2.406</span>, <span class="fl">6.749</span>, <span class="fl">7.507</span>, <span class="fl">1.929</span>,</span>
<span>                <span class="fl">0.095</span>, <span class="fl">5.987</span>, <span class="fl">6.327</span>, <span class="fl">9.056</span>, <span class="fl">2.758</span>, <span class="fl">0.978</span>, <span class="fl">2.360</span>, <span class="fl">0.150</span>, <span class="fl">1.974</span>, <span class="fl">0.074</span><span class="op">)</span></span>
<span><span class="va">letterFreqs</span> <span class="op">=</span> <span class="va">letterFreqs</span><span class="op">/</span><span class="fl">100</span></span>
<span><span class="va">letterFrame</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  letter <span class="op">=</span> <span class="va">letters</span>, </span>
<span>  freq<span class="op">=</span><span class="va">letterFreqs</span>, </span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># now let's generate letters according to their letter frequencies</span></span>
<span><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span></span>
<span><span class="va">randomDraws</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  draw<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span>, </span>
<span>  letter<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letterFrame</span><span class="op">$</span><span class="va">letter</span>, size<span class="op">=</span><span class="va">N</span>, replace<span class="op">=</span><span class="cn">TRUE</span>, prob<span class="op">=</span><span class="va">letterFrame</span><span class="op">$</span><span class="va">freq</span><span class="op">)</span>, </span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ClevelandDotPlot.html">ClevelandDotPlot</a></span><span class="op">(</span><span class="va">randomDraws</span>, <span class="st">"letter"</span>, title <span class="op">=</span> <span class="st">"Example Cleveland-style dot plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-23-1.png" width="576"></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ClevelandDotPlot.html">ClevelandDotPlot</a></span><span class="op">(</span><span class="va">randomDraws</span>, <span class="st">"letter"</span>, limit_n <span class="op">=</span> <span class="fl">10</span>,  title <span class="op">=</span> <span class="st">"Top 10 most frequent letters"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-23-2.png" width="576"></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ClevelandDotPlot.html">ClevelandDotPlot</a></span><span class="op">(</span><span class="va">randomDraws</span>, <span class="st">"letter"</span>, sort<span class="op">=</span><span class="fl">0</span>, title<span class="op">=</span><span class="st">"Example Cleveland-style dot plot, unsorted"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-23-3.png" width="576"></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ClevelandDotPlot.html">ClevelandDotPlot</a></span><span class="op">(</span><span class="va">randomDraws</span>, <span class="st">"letter"</span>, sort<span class="op">=</span><span class="fl">1</span>, stem<span class="op">=</span><span class="cn">FALSE</span>, title<span class="op">=</span><span class="st">"Example with increasing sort order + coord_flip, no stem"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-23-4.png" width="576"></p>
<p><code>ClevelandDotPlot</code> also accepts an integral <em>x</em>
variable. You probably want <code>sort = 0</code> in this case.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">34903490</span><span class="op">)</span></span>
<span><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span></span>
<span><span class="va">ncar_vec</span> <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">5</span></span>
<span><span class="va">prob</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">3</span>, <span class="fl">3.5</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0.75</span><span class="op">)</span>; <span class="va">prob</span> <span class="op">=</span> <span class="va">prob</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">prob</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  num_cars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">ncar_vec</span>, size <span class="op">=</span> <span class="va">N</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob<span class="op">=</span><span class="va">prob</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ClevelandDotPlot.html">ClevelandDotPlot</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"num_cars"</span>, sort <span class="op">=</span> <span class="fl">0</span>, title <span class="op">=</span> <span class="st">"Distribution of household vehicle ownership"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-24-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="shadow-plots">Shadow Plots<a class="anchor" aria-label="anchor" href="#shadow-plots"></a>
</h2>
<p>Plot a bar chart of row counts conditioned on the categorical
variable <code>condvar</code>, faceted on a second categorical variable,
<code>refinevar</code>. Each faceted plot also shows a “shadow plot” of
the totals conditioned on <code>condvar</code> alone.</p>
<p>This plot enables comparisons of sub-population totals across both
<code>condvar</code> and <code>refinevar</code> simultaneously.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">354534</span><span class="op">)</span></span>
<span><span class="va">N</span> <span class="op">=</span> <span class="fl">100</span></span>
<span></span>
<span><span class="co"># rough proportions of eye colors</span></span>
<span><span class="va">eprobs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.37</span>, <span class="fl">0.36</span>, <span class="fl">0.16</span>, <span class="fl">0.11</span><span class="op">)</span></span>
<span></span>
<span><span class="va">eye_color</span>  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Brown"</span>, <span class="st">"Blue"</span>, <span class="st">"Hazel"</span>, <span class="st">"Green"</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">N</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="va">eprobs</span><span class="op">)</span></span>
<span><span class="va">sex</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">N</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A data frame of eye color by sex</span></span>
<span><span class="va">dframe</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  eye_color <span class="op">=</span> <span class="va">eye_color</span>, </span>
<span>  sex <span class="op">=</span> <span class="va">sex</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ShadowPlot.html">ShadowPlot</a></span><span class="op">(</span><span class="va">dframe</span>, <span class="st">"eye_color"</span>, <span class="st">"sex"</span>, title <span class="op">=</span> <span class="st">"Shadow plot of eye colors by sex"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-25-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="shadow-histogram">Shadow Histogram<a class="anchor" aria-label="anchor" href="#shadow-histogram"></a>
</h2>
<p>Plot a histogram of a continuous variable <code>xvar</code>, faceted
on a categorical conditioning variable, <code>condvar</code>. Each
faceted plot also shows a “shadow plot” of the unconditioned histogram
for comparison.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">354534</span><span class="op">)</span></span>
<span><span class="va">N</span> <span class="op">=</span> <span class="fl">100</span></span>
<span></span>
<span><span class="va">dframe</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>, </span>
<span>  gp <span class="op">=</span> <span class="st">"region 2"</span>, </span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">dframe</span><span class="op">$</span><span class="va">gp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dframe</span>, <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">0.5</span>, <span class="st">"region 1"</span>, </span>
<span>                                <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0.5</span>, <span class="st">"region 3"</span>, <span class="va">gp</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ShadowHist.html">ShadowHist</a></span><span class="op">(</span><span class="va">dframe</span>, <span class="st">"x"</span>, <span class="st">"gp"</span>, title <span class="op">=</span> <span class="st">"X values by region"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: The `&lt;scale&gt;` argument of `guides()` cannot be `FALSE`. Use "none" instead as</span></span>
<span><span class="co">## of ggplot2 3.3.4.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">WVPlots</span> package.</span></span>
<span><span class="co">##   Please report the issue at <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/WinVector/WVPlots/issues&gt;</span>.</span></span>
<span><span class="co">## <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-26-1.png" width="576"></p>
<p><code>ShadowHist</code> uses the Brewer Dark2 palette by default. You
can pass in another Brewer palette to change the color scheme. If you
prefer all the histograms to be the same color, set
<code>monochrome=TRUE</code>.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ShadowHist.html">ShadowHist</a></span><span class="op">(</span><span class="va">dframe</span>, <span class="st">"x"</span>, <span class="st">"gp"</span>, title <span class="op">=</span> <span class="st">"X values by region"</span>, monochrome<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-27-1.png" width="576"></p>
<p>To use a non-Brewer palette, such as viridis, or a manual color map,
set <code>palette=NULL</code>. Here’s an example of setting the color
palette manually.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">colormap</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#1F968BFF"</span>, <span class="st">"#29AF7FFF"</span>, <span class="st">"#55C667FF"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ShadowHist.html">ShadowHist</a></span><span class="op">(</span><span class="va">dframe</span>, <span class="st">"x"</span>, <span class="st">"gp"</span>, title <span class="op">=</span> <span class="st">"X values by region"</span>, palette<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="va">colormap</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-28-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="scatterbox-plots">ScatterBox Plots<a class="anchor" aria-label="anchor" href="#scatterbox-plots"></a>
</h2>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">classes</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span></span>
<span><span class="va">means</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">means</span><span class="op">)</span> <span class="op">=</span> <span class="va">classes</span></span>
<span><span class="va">label</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">classes</span>, size<span class="op">=</span><span class="fl">1000</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">meas</span> <span class="op">=</span> <span class="va">means</span><span class="op">[</span><span class="va">label</span><span class="op">]</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span></span>
<span><span class="va">frm2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>label<span class="op">=</span><span class="va">label</span>,</span>
<span>                  meas <span class="op">=</span> <span class="va">meas</span>,</span>
<span>                  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ScatterBoxPlot.html">ScatterBoxPlot</a></span><span class="op">(</span><span class="va">frm2</span>, <span class="st">"label"</span>, <span class="st">"meas"</span>, pt_alpha<span class="op">=</span><span class="fl">0.2</span>, title<span class="op">=</span><span class="st">"Example Scatter/Box plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-29-1.png" width="576"></p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ScatterBoxPlotH.html">ScatterBoxPlotH</a></span><span class="op">(</span><span class="va">frm2</span>, <span class="st">"meas"</span>, <span class="st">"label"</span>,  pt_alpha<span class="op">=</span><span class="fl">0.2</span>, title<span class="op">=</span><span class="st">"Example Scatter/Box plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-29-2.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="discrete-distribution-plot">Discrete Distribution Plot<a class="anchor" aria-label="anchor" href="#discrete-distribution-plot"></a>
</h2>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">frmx</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">20</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>                  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/DiscreteDistribution.html">DiscreteDistribution</a></span><span class="op">(</span><span class="va">frmx</span>, <span class="st">"x"</span>,<span class="st">"Discrete example"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-30-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="distribution-and-count-plots">Distribution and Count Plots<a class="anchor" aria-label="anchor" href="#distribution-and-count-plots"></a>
</h2>
<div class="section level3">
<h3 id="compare-observations-to-a-normal-distribution-with-the-same-mean-and-standard-deviation-">Compare observations to a normal distribution with the same mean and
standard deviation.<a class="anchor" aria-label="anchor" href="#compare-observations-to-a-normal-distribution-with-the-same-mean-and-standard-deviation-"></a>
</h3>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">52523</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>wt<span class="op">=</span><span class="fl">100</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>                stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/PlotDistCountNormal.html">PlotDistCountNormal</a></span><span class="op">(</span><span class="va">d</span>,<span class="st">'wt'</span>,<span class="st">'example'</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-31-1.png" width="576"></p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/PlotDistDensityNormal.html">PlotDistDensityNormal</a></span><span class="op">(</span><span class="va">d</span>,<span class="st">'wt'</span>,<span class="st">'example'</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-31-2.png" width="576"></p>
</div>
<div class="section level3">
<h3 id="compare-coin-flip-observations-to-a-binomial-distribution">Compare “coin flip” observations to a binomial distribution<a class="anchor" aria-label="anchor" href="#compare-coin-flip-observations-to-a-binomial-distribution"></a>
</h3>
<p>Compare to a binomial with the same success rate as the observed
data</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">13951</span><span class="op">)</span></span>
<span><span class="va">trial_size</span> <span class="op">=</span> <span class="fl">20</span>  <span class="co"># one trial is 20 flips</span></span>
<span><span class="va">ntrial</span> <span class="op">=</span> <span class="fl">100</span>     <span class="co"># run 100 trials</span></span>
<span><span class="va">true_frate</span> <span class="op">=</span> <span class="fl">0.4</span>  <span class="co"># true heads probability</span></span>
<span><span class="va">fdata</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>n_heads <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">ntrial</span>, <span class="va">trial_size</span>, <span class="va">true_frate</span><span class="op">)</span>,</span>
<span>                   stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">title</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Distribution of head counts, trial size ="</span>, <span class="va">trial_size</span><span class="op">)</span></span>
<span><span class="co"># compare to empirical p</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/PlotDistCountBinomial.html">PlotDistCountBinomial</a></span><span class="op">(</span><span class="va">fdata</span>, <span class="st">"n_heads"</span>, <span class="va">trial_size</span>, <span class="va">title</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-32-1.png" width="576"></p>
<p>Compare to a binomial with a specified success rate</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># compare to theoretical p of 0.5</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/PlotDistCountBinomial.html">PlotDistCountBinomial</a></span><span class="op">(</span><span class="va">fdata</span>, <span class="st">"n_heads"</span>, <span class="va">trial_size</span>, <span class="va">title</span>,</span>
<span>                      p <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-33-1.png" width="576"></p>
</div>
<div class="section level3">
<h3 id="compare-observed-rate-data-to-a-beta-distribution-with-same-mean-and-standard-deviation">Compare observed rate data to a beta distribution with same mean and
standard deviation<a class="anchor" aria-label="anchor" href="#compare-observed-rate-data-to-a-beta-distribution-with-same-mean-and-standard-deviation"></a>
</h3>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">349521</span><span class="op">)</span></span>
<span><span class="va">N</span> <span class="op">=</span> <span class="fl">100</span>  <span class="co"># number of cohorts</span></span>
<span><span class="va">psucc</span> <span class="op">=</span> <span class="fl">0.15</span>  <span class="co"># true success rate in population</span></span>
<span><span class="va">group_size</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">N</span>, min<span class="op">=</span><span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>  <span class="co"># sizes of observed sample groups</span></span>
<span><span class="va">nsucc</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">group_size</span>, <span class="va">psucc</span><span class="op">)</span>   <span class="co"># successes in each group</span></span>
<span><span class="va">hdata</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>n_success<span class="op">=</span><span class="va">nsucc</span>, </span>
<span>                   group_size<span class="op">=</span><span class="va">group_size</span>,</span>
<span>                   stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># observed rate of successes in each group</span></span>
<span><span class="va">hdata</span><span class="op">$</span><span class="va">rate_success</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">hdata</span>, <span class="va">n_success</span><span class="op">/</span><span class="va">group_size</span><span class="op">)</span></span>
<span></span>
<span><span class="va">title</span> <span class="op">=</span> <span class="st">"Observed prevalence of success in population"</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/PlotDistHistBeta.html">PlotDistHistBeta</a></span><span class="op">(</span><span class="va">hdata</span>, <span class="st">"rate_success"</span>, <span class="va">title</span><span class="op">)</span> </span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-34-1.png" width="576"></p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/PlotDistDensityBeta.html">PlotDistDensityBeta</a></span><span class="op">(</span><span class="va">hdata</span>, <span class="st">"rate_success"</span>, <span class="va">title</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-34-2.png" width="576"></p>
</div>
</div>
<div class="section level2">
<h2 id="smoothed-scatterplots">Smoothed Scatterplots<a class="anchor" aria-label="anchor" href="#smoothed-scatterplots"></a>
</h2>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">10</span>,<span class="fl">15</span>,<span class="fl">18</span>,<span class="fl">20</span>,<span class="fl">25</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>,</span>
<span>                y<span class="op">=</span><span class="va">y</span>,</span>
<span>                stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ConditionalSmoothedScatterPlot.html">ConditionalSmoothedScatterPlot</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="cn">NULL</span>, title<span class="op">=</span><span class="st">"centered smooth, one group"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-35-1.png" width="576"></p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ConditionalSmoothedScatterPlot.html">ConditionalSmoothedScatterPlot</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="cn">NULL</span>, title<span class="op">=</span><span class="st">"left smooth, one group"</span>, align<span class="op">=</span><span class="st">"left"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-35-2.png" width="576"></p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ConditionalSmoothedScatterPlot.html">ConditionalSmoothedScatterPlot</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="cn">NULL</span>, title<span class="op">=</span><span class="st">"right smooth, one group"</span>, align<span class="op">=</span><span class="st">"right"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-35-3.png" width="576"></p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, gp<span class="op">=</span><span class="st">"times 1"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="fl">0.5</span><span class="op">*</span><span class="va">y</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, gp<span class="op">=</span><span class="st">"times 1/2"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="fl">2</span><span class="op">*</span><span class="va">y</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, gp<span class="op">=</span><span class="st">"times 2"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>           stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ConditionalSmoothedScatterPlot.html">ConditionalSmoothedScatterPlot</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"gp"</span>, title<span class="op">=</span><span class="st">"centered smooth, multigroup"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-35-4.png" width="576"></p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ConditionalSmoothedScatterPlot.html">ConditionalSmoothedScatterPlot</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"gp"</span>, title<span class="op">=</span><span class="st">"left smooth, multigroup"</span>, align<span class="op">=</span><span class="st">"left"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-35-5.png" width="576"></p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ConditionalSmoothedScatterPlot.html">ConditionalSmoothedScatterPlot</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"gp"</span>, title<span class="op">=</span><span class="st">"right smooth, multigroup"</span>, align<span class="op">=</span><span class="st">"right"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-35-6.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="density-plot-with-shaded-tail">Density Plot with Shaded Tail<a class="anchor" aria-label="anchor" href="#density-plot-with-shaded-tail"></a>
</h2>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">52523</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>meas<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">threshold</span> <span class="op">=</span> <span class="op">-</span><span class="fl">1.5</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ShadedDensity.html">ShadedDensity</a></span><span class="op">(</span><span class="va">d</span>, <span class="st">"meas"</span>, <span class="va">threshold</span>, </span>
<span>                       title<span class="op">=</span><span class="st">"Example shaded density plot, left tail"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-36-1.png" width="576"></p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ShadedDensity.html">ShadedDensity</a></span><span class="op">(</span><span class="va">d</span>, <span class="st">"meas"</span>, <span class="op">-</span><span class="va">threshold</span>, tail<span class="op">=</span><span class="st">"right"</span>, </span>
<span>                       title<span class="op">=</span><span class="st">"Example shaded density plot, right tail"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-36-2.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="density-plot-with-shaded-central-region">Density Plot with Shaded Central Region<a class="anchor" aria-label="anchor" href="#density-plot-with-shaded-central-region"></a>
</h2>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">52523</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>meas<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># first and third quartiles of the data (central 50%)</span></span>
<span><span class="va">boundaries</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">meas</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">WVPlots</span><span class="fu">::</span><span class="fu"><a href="../reference/ShadedDensityCenter.html">ShadedDensityCenter</a></span><span class="op">(</span><span class="va">d</span>, <span class="st">"meas"</span>, <span class="va">boundaries</span>, </span>
<span>                       title<span class="op">=</span><span class="st">"Example center-shaded density plot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="WVPlots_examples_files/figure-html/unnamed-chunk-37-1.png" width="576"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by John Mount, Nina Zumel.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
